<!-- register.component.html -->
<div class="register-container">
    <div class="register-card">
      <h2>Создание аккаунта</h2>
      
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label>Имя</label>
          <div class="input-with-icon">
            <i class="fas fa-user"></i>
            <input 
              type="text" 
              formControlName="name"
              placeholder="Ваше имя"
              [ngClass]="{ 'error': submitted && f['name'].errors }">
          </div>
          <div *ngIf="submitted && f['name'].errors" class="error-message">
            <span *ngIf="f['name'].errors['required']">Обязательное поле</span>
          </div>
        </div>
  
        <div class="form-group">
          <label>Email</label>
          <div class="input-with-icon">
            <i class="fas fa-envelope"></i>
            <input 
              type="email" 
              formControlName="email"
              placeholder="example@mail.com"
              [ngClass]="{ 'error': submitted && f['email'].errors }">
          </div>
          <div *ngIf="submitted && f['email'].errors" class="error-message">
            <span *ngIf="f['email'].errors['required']">Обязательное поле</span>
            <span *ngIf="f['email'].errors['email']">Некорректный email</span>
          </div>
        </div>
  
        <div class="form-group">
          <label>Пароль</label>
          <div class="input-with-icon">
            <i class="fas fa-lock"></i>
            <input 
              type="password" 
              formControlName="password"
              placeholder="••••••••"
              [ngClass]="{ 'error': submitted && f['password'].errors }">
          </div>
          <div *ngIf="submitted && f['password'].errors" class="error-message">
            <span *ngIf="f['password'].errors['required']">Обязательное поле</span>
            <span *ngIf="f['password'].errors['minlength']">
              Минимум 8 символов
            </span>
          </div>
        </div>
  
        <div class="form-group">
          <label>Повторите пароль</label>
          <div class="input-with-icon">
            <i class="fas fa-lock"></i>
            <input 
              type="password" 
              formControlName="confirmPassword"
              placeholder="••••••••"
              [ngClass]="{ 'error': submitted && f['confirmPassword'].errors }">
          </div>
          <div *ngIf="submitted && f['confirmPassword'].errors" class="error-message">
            <span *ngIf="f['confirmPassword'].errors['required']">
              Обязательное поле
            </span>
            <span *ngIf="registerForm.errors?.['passwordMismatch']">
              Пароли не совпадают
            </span>
          </div>
        </div>
  
        <button type="submit" class="btn" [disabled]="loading">
          <span *ngIf="!loading">Зарегистрироваться</span>
          <span *ngIf="loading"><i class="fas fa-spinner fa-spin"></i></span>
        </button>
  
        <div class="links">
          <span>Уже есть аккаунт? </span>
          <a routerLink="/login">Войти</a>
        </div>
      </form>
  
      <div *ngIf="error" class="server-error">
        {{ error }}
      </div>
    </div>
  </div>